<!DOCTYPE html>
<html lang="en" xmlns:th="www.thymeleaf.org">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description"
		content="Responsive sidebar template with sliding effect and dropdown menu based on bootstrap 3">
	<title>iConverge</title>

	<!-- using online links -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
		integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.6.0/mdb.min.css" rel="stylesheet" />
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"
		integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
	<link rel="stylesheet" href="//malihu.github.io/custom-scrollbar/jquery.mCustomScrollbar.min.css">
	<!-- CSS only -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
	<!-- CSS only -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">

	<!-- using local links -->
	<!-- <link rel="stylesheet" href="../node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../node_modules/@fortawesome/fontawesome-free/css/all.min.css">
    <link rel="stylesheet" href="../node_modules/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.css"> -->

	<link rel="stylesheet" href="../../css/main.css">
	<link rel="stylesheet" href="../../css/sidebar-themes.css">
	<link rel="stylesheet" href="../../css/form-style.css">

	<!-- datatable link  -->
	<link href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.min.css" rel="stylesheet" />

</head>

<body>
	<div class="page-wrapper default-theme  bg1 toggled">
		<span th:remove="tag" th:utext="${dataHtml}"></span>


		<!-- page-content  -->
		<main class="page-content">
			<div id="overlay" class="overlay"></div>
			<div class="container-fluid" style="padding: 0px;">
				<div class="title-bar"
					style="height: 90px; background-color: #eaeaea; box-shadow: 0 0 0.875rem 0 rgb(33 37 41/ 10%) !important;">
					<a id="toggle-sidebar" class="btn btn-secondary rounded-0" href="#"
						style="margin: 20px; background: #3ab54a;"> <span><svg xmlns="http://www.w3.org/2000/svg"
								width="16" height="16" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">
								<path fill-rule="evenodd"
									d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z" />
							</svg></span>
					</a>
				</div>
				<div class="container pt-5 pb-5">
					<div class="card-container-holder">
						<div class="row">
							<div class="col-lg-1 col-md-1 col-sm-0"></div>
							<div class="col-lg-10 col-md-10 col-sm-12">
								<div class="card-5">
									<div class="card-heading">
										<h2 class="text-center">Group Access</h2>
									</div>
									<div class="card-body">


										<form th:action="@{'/IC_GROUP_ACCESS/' +${gCode}}" method="post"
											th:object="${ic_group_access}">




											<div class="row">
												<div class="col-lg-6 col-md-6 col-sm-12">
													<div class="row">
														<div class="col-lg-3 col-md-3 col-sm-12">
															<label for="text" class="text-center m-2">Group
																Name:</label>
														</div>
														<div class="col-lg-9 col-md-9 col-sm-12">
															<select name="GRP_CODE" id="GRP_CODE" class="form-control"
																readonly="true">
																<option value="0">--Select Group name--</option>
																<option th:each="a : ${groupDorpdownList}"
																	th:value="${a.GRP_CODE}" th:text="${a.GRP_NAME}"
																	th:selected=${a.GRP_CODE}==${gCode}></option>

															</select>
														</div>
													</div>
												</div>
												<div class="col-lg-6 col-md-6 col-sm-12">
													<div class="row">
														<div class="col-lg-3 col-md-3 col-sm-12">
															<label for="text" class="text-center m-2">Module
																Name:</label>
														</div>


														<div class="col-lg-9 col-md-9 col-sm-12">

															<select name="MOD_CODE" id="module" class="form-control">

																<!--                                          <option disabled="disabled" selected="selected" name="MOD_CODE" id="MOD_CODE" value="">--Select Module Name--</option> -->
																<!--                    						 <option value="1020">Distribution Dashboard</option> -->
																<option value="0">--Select Module name--</option>
																<option th:each="a : ${moduleDropdownList}"
																	th:value="${a.modCode}" th:text="${a.modName}"
																	th:selected=${a.modCode}==${ic_group_access.MOD_CODE}>
																</option>

															</select>
														</div>

													</div>
												</div>
												<div class="col-lg-6 col-md-6 col-sm-12">
													<div class="row">
														<div class="col-lg-3 col-md-3 col-sm-12">
															<label for="text" class="text-center m-2">Activity:</label>
														</div>
														<div class="col-lg-9 col-md-9 col-sm-12">


															<select name="ACTIVITY_CODE" id="ACTIVITY_CODE"
																 class="form-control">
																<option value="0">--Select Activity Name--</option>
																

															</select>

														</div>
													</div>
												</div>

											</div>




											<div class="row">
												<div class="col-lg-6 col-md-6 col-sm-12">
													<div class="row">
														<div class="col-lg-3 col-md-3 col-sm-12">
															<label for="text" class="text-center m-2">Active:</label>
														</div>
														<div class="col-lg-6 col-md-6 col-sm-12">
															<select name="STATUS" id="STATUS" class="form-control">

																<option th:value="Y" th:text="YES"
																	th:selected="*{STATUS} == 'Y' "></option>
																<option th:value="N" th:text="NO"
																	th:selected="*{STATUS} == 'N' "></option>


															</select>
														</div>
													</div>
												</div>
											</div>



											<div class="row">
												<div class="col-lg-4 col-md-4 col-sm-12"></div>
												<div class="col-lg-4 col-md-4 col-sm-12"></div>
												<div class="col-lg-4 col-md-4 col-sm-12">
													<button type="button" class="btn btn-success m-3"
														data-toggle="modal" data-target="#myModal"
														th:if="${flag} == '0' ">Save</button>
												</div>
											</div>


											<div class="row">

												<div class="col-lg-4 col-md-4 col-sm-12">
													<button type="button" class="btn btn-info m-3" data-toggle="modal"
														data-target="#myModal1" th:if="${flag} == '1' ">Update</button>

												</div>
												<div class="col-lg-4 col-md-4 col-sm-12">
													<button type="button" class="btn btn-danger m-3" data-toggle="modal"
														data-target="#myModal2" th:if="${flag} == '1' ">Delete</button>
												</div>
												<div class="col-lg-4 col-md-4 col-sm-12">
													<button type="button" class="btn btn-warning m-3"
														data-toggle="modal" data-target="#myModal3"
														th:if="${flag} == '1' ">clear</button>
												</div>
											</div>








											<div class="row form-inline" style="margin-left: 450px;">



												<!-- Modal HTML -->
												<div id="myModal" class="modal fade ">
													<div class="modal-dialog modal-confirm">
														<div class="modal-content">
															<div class="modal-header flex-column">
																<h4 class="modal-title w-100">Are you sure?</h4>
																<a type="button" class="btn-close" data-dismiss="modal"
																	aria-hidden="true">&times;</a>
															</div>
															<div class="modal-body">
																<p>Do you really want to save these records?</p>
															</div>
															<div class="modal-footer justify-content-center"
																style="border: none;">
																<a type="button" class="btn btn-secondary"
																	data-dismiss="modal">Cancel</a>
																<!--                     <button type="button" class="btn btn-danger">Delete</button> -->
																<input class="btn btn-danger" name="submit" id="submit"
																	type="submit" value="Yes">
															</div>
														</div>
													</div>
												</div>

												<!--     Modal HTML Ends -->





												<!-- Modal HTML -->
												<div id="myModal1" class="modal fade ">
													<div class="modal-dialog modal-confirm">
														<div class="modal-content">
															<div class="modal-header flex-column">
																<h4 class="modal-title w-100">Are you sure?</h4>
																<a type="button" class="btn-close" data-dismiss="modal"
																	aria-hidden="true">&times;</a>
															</div>
															<div class="modal-body">
																<p>Do you really want to update these records?</p>
															</div>
															<div class="modal-footer justify-content-center"
																style="border: none;">
																<a type="button" class="btn btn-secondary"
																	data-dismiss="modal">Cancel</a>
																<!--                     <button type="button" class="btn btn-danger">Delete</button> -->
																<input class="btn btn-danger" name="edit" id="edit"
																	type="submit"
																	th:formaction="@{'/IC_GROUP_ACCESS/' +${gCode} +'/' + ${gAId} }"
																	value="Yes">
															</div>
														</div>
													</div>
												</div>

												<!--     Modal HTML Ends -->



												<!-- <button  type="submit" class="btn btn-danger" name="delete" id="delete" style="margin-right:80px" >Delete</button> -->



												<!-- Modal HTML -->
												<div id="myModal2" class="modal fade ">
													<div class="modal-dialog modal-confirm">
														<div class="modal-content">
															<div class="modal-header flex-column">
																<h4 class="modal-title w-100">Are you sure?</h4>
																<a type="button" class="btn-close" data-dismiss="modal"
																	aria-hidden="true">&times;</a>
															</div>
															<div class="modal-body">
																<p>Do you really want to delete these records?</p>
															</div>
															<div class="modal-footer justify-content-center"
																style="border: none;">
																<a type="button" class="btn btn-secondary"
																	data-dismiss="modal">Cancel</a>
																<!--                     <button type="button" class="btn btn-danger">Delete</button> -->
																<input class="btn btn-danger" name="delete" id="delete"
																	type="submit"
																	th:formaction="@{'/IC_GROUP_ACCESS_delete/' +${gCode} +'/' + ${gAId} }"
																	value="Yes">
															</div>
														</div>
													</div>
												</div>

												<!--     Modal HTML Ends -->




												<!--                   Modal html for clear button start  -->
												<!-- <button  type="submit" class="btn btn-danger" name="delete" id="delete" style="margin-right:80px" >Delete</button> -->



												<!-- Modal HTML -->
												<div id="myModal3" class="modal fade ">
													<div class="modal-dialog modal-confirm">
														<div class="modal-content">
															<div class="modal-header flex-column">
																<h4 class="modal-title w-100">Are you sure?</h4>
																<a type="button" class="btn-close" data-dismiss="modal"
																	aria-hidden="true">&times;</a>
															</div>
															<div class="modal-body">
																<p>Do you really want to clear these records?</p>
															</div>
															<div class="modal-footer justify-content-center"
																style="border: none;">
																<a type="button" th:href="@{'/IC_GROUP_ACCESS/'+${gCode}}" class="btn btn-secondary"
																	data-dismiss="modal">Cancel</a>
																<!--                     <button type="button" class="btn btn-danger">Delete</button> -->
																<input class="btn btn-danger" name="clear" id="clear"
																	type="submit"
																	
																	value="Yes">
															</div>
														</div>
													</div>
												</div>

												<!--                   Modal html for clear button start  -->


												<!--     Modal HTML Ends -->


											</div>

										</form>
									</div>
								</div>
							</div>
							<div class="col-lg-1 col-md-1 col-sm-0"></div>
						</div>

						<div class="row mt-5 pt-3">
							<div class="col-lg-1 col-md-1 col-sm-0"></div>
							<div class="col-lg-10 col-md-10 col-sm-12">
								<div class="card">
									<div class="card-header">
										<h4 class="card-title">Group Access</h4>
									</div>
									<div class="card-body">
										<div class="table-responsive">
											<table id="table_id" class="table display table-bordered margin-top:10px"
												style="margin: 0 auto; width: 100%; border: 2px solid black; width: 50%; border-collapse: collapse;">

												<thead>
													<tr>

														<th>Group Name</th>
														<th>Module Name</th>
														<th>Active</th>
														<th>Activity</th>
													</tr>
												</thead>


												<tbody>

													<tr th:each="s: ${listIC_GROUP_ACCESS}">
														<td style="width: 20%"><a
																th:href=" '/IC_GROUP_ACCESS/'+${s.GRP_CODE} +'/'+ ${s.GRP_ACS_ID}  "
																class="row m-0 p-0" th:text="${s.GRP_NAME}"></td>
														<td style="width: 30%"><a
																th:href=" '/IC_GROUP_ACCESS/'+${s.GRP_CODE} +'/'+ ${s.GRP_ACS_ID}  "
																class="row m-0 p-0" th:text="${s.MOD_NAME}"></td>
														<td style="width: 10%"><a
																th:href=" '/IC_GROUP_ACCESS/'+${s.GRP_CODE} +'/'+ ${s.GRP_ACS_ID}  "
																class="row m-0 p-0" th:text="${s.STATUS}"></td>
														<td style="width: 10%"><a
																th:href=" '/IC_GROUP_ACCESS/'+${s.GRP_CODE} +'/'+ ${s.GRP_ACS_ID}  "
																class="row m-0 p-0" th:text="${s.ACTIVITY_NAME}"></td>

													</tr>

												</tbody>
											</table>
										</div>
									</div>
								</div>
							</div>
							<div class="col-lg-1 col-md-1 col-sm-0"></div>
						</div>
					</div>
				</div>
			</div>
		</main>
		<!-- page-content" -->
	</div>
	<!-- page-wrapper -->

	<!-- using online scripts -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
		integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous">
		</script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"
		integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous">
		</script>
	<script src="//malihu.github.io/custom-scrollbar/jquery.mCustomScrollbar.concat.min.js"></script>

	<!-- using local scripts -->
	<!-- <script src="../node_modules/jquery/dist/jquery.min.js"></script>
    <script src="../node_modules/popper.js/dist/umd/popper.min.js"></script>
    <script src="../node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="../node_modules/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.concat.min.js"></script> -->


	<script src="../../js/main.js"></script>
	<!-- datatable script  -->
	<script src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.6.0/mdb.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdn.rawgit.com/harvesthq/chosen/gh-pages/chosen.jquery.min.js"></script>
<link href="https://cdn.rawgit.com/harvesthq/chosen/gh-pages/chosen.min.css" rel="stylesheet"/>

	<script
			src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
			integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
			crossorigin="anonymous"></script>
		<script

	<script>
			$(document).ready(function(){
				$("#module").change(function(){
					
					$("#ACTIVITY_CODE").empty();
					
						
					
					var x = $("#module").val();
					
					if(x == ""){
						
						$("#ACTIVITY_CODE").empty();
						$("<option>").val("").text("Select Activity").appendTo(activityDropdown);
					
					}
					else{
					
						var urlString = "/api/activity/"+x;
						
						$.ajax({
							method: "GET",
							url : urlString
						})
						.done(function(responseJson){
							
							activityDropdown = $("#ACTIVITY_CODE");
							
							$("<option>").val("").text("Select activity").appendTo(activityDropdown);
							$.each(responseJson, function(index, activity){
								console.log(activity);
								$("<option>").val(activity.activityCode).text(activity.activityName).appendTo(activityDropdown);
							});
						})
						.fail(function(){
							alert("Error");
						})
					}
					
					
				})
			})
		</script>


</body>

</html>